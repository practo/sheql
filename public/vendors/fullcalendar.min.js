/*!
 * FullCalendar v1.6.4-yearview
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw - 2014 Tanguy Pruvot
 */
(function(t,e){function n(e){t.extend(!0,Te,e)}function r(n,r,f){function c(t){oe?p()&&(S(),M(t)):u()}function u(){ie=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),oe=t("<div class='fc-content' style='position:relative'/>").prependTo(n),re=new a(ne,r),ae=re.render(),ae&&n.prepend(ae),m(r.defaultView),r.handleWindowResize&&t(window).resize(O),y()||v()}function v(){setTimeout(function(){!se.start&&y()&&C()},0)}function h(){se&&(ee("viewDestroy",se,se,se.element),se.triggerEventDestroy()),t(window).unbind("resize",O),re.destroy(),oe.remove(),n.removeClass("fc fc-rtl ui-widget")}function p(){return n.is(":visible")}function y(){return t("body").is(":visible")}function m(t){se&&t==se.name||b(t)}function b(e){ge++,se&&(ee("viewDestroy",se,se,se.element),j(),se.triggerEventDestroy(),$(),se.element.remove(),re.deactivateButton(se.name)),re.activateButton(e),se=new Oe[e](t("<div class='fc-view fc-view-"+e+"' style='position:relative'/>").appendTo(oe),ne),C(),Q(),ge--}function C(t){(!se.start||t||se.start>pe||pe>=se.end)&&p()&&M(t)}function M(t){ge++,se.start&&(ee("viewDestroy",se,se,se.element),j(),R()),$(),se.render(pe,t||0),E(),Q(),(se.afterRender||W)(),L(),q(),ee("viewRender",se,se,se.element),se.trigger("viewDisplay",ve),ge--,N()}function T(){p()&&(j(),R(),S(),E(),F())}function S(){fe=r.contentHeight?r.contentHeight:r.height?r.height-(ae?ae.height():0)-H(oe):Math.round(oe.width()/Math.max(r.aspectRatio,.5))}function E(){fe===e&&S(),ge++,se.setHeight(fe),se.setWidth(oe.width()),ge--,le=n.outerWidth()}function O(){if(!ge)if(se.start){var t=++he;setTimeout(function(){t==he&&!ge&&p()&&le!=(le=n.outerWidth())&&(ge++,T(),se.trigger("windowResize",ve),ge--)},200)}else v()}function k(){R(),z()}function x(t){R(),F(t)}function F(t){p()&&(se.setEventData(ye),se.renderEvents(ye,t),se.trigger("eventAfterAllRender"))}function R(){se.triggerEventDestroy(),se.clearEvents(),se.clearEventData()}function N(){!r.lazyFetching||ue(se.visStart,se.visEnd)?z():F()}function z(){de(se.visStart,se.visEnd)}function Y(t){ye=t,F()}function A(t){x(t)}function L(){re.updateTitle(se.title)}function _(){var t=new Date;re.toggleEnable("today",se.start>t||t>=se.end)}function q(){_(),r.minDate&&re.toggleEnable("prev",r.minDate<se.start),r.maxDate&&re.toggleEnable("next",r.maxDate>se.end)}function P(t,n,r){se.select(t,n,r===e?!0:r)}function j(){se&&se.unselect()}function B(){C(-1)}function I(){C(1)}function V(){i(pe,-1),C()}function G(){i(pe,1),C()}function X(){pe=new Date,C()}function J(t,e,n){t instanceof Date?pe=d(t):g(pe,t,e,n),C()}function U(t,n,r){t!==e&&i(pe,t),n!==e&&s(pe,n),r!==e&&l(pe,r),C()}function Z(){return d(pe)}function $(){oe.css({width:"100%",height:oe.height(),overflow:"hidden"})}function Q(){oe.css({width:"",height:"",overflow:""})}function K(){return se}function te(t,n){return n===e?r[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(r[t]=n,T()),e)}function ee(t,n){return r[t]?r[t].apply(n||ve,Array.prototype.slice.call(arguments,2)):e}var ne=this;ne.options=r,ne.render=c,ne.destroy=h,ne.refetchEvents=k,ne.reportEvents=Y,ne.reportEventChange=A,ne.rerenderEvents=x,ne.changeView=m,ne.select=P,ne.unselect=j,ne.prev=B,ne.next=I,ne.prevYear=V,ne.nextYear=G,ne.today=X,ne.gotoDate=J,ne.incrementDate=U,ne.formatDate=function(t,e){return w(t,e,r)},ne.formatDates=function(t,e,n){return D(t,e,n,r)},ne.getDate=Z,ne.getView=K,ne.option=te,ne.trigger=ee,o.call(ne,r,f);var re,ae,oe,ie,se,le,fe,ce,ue=ne.isFetchNeeded,de=ne.fetchEvents,ve=n[0],he=0,ge=0,pe=new Date,ye=[];g(pe,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(ce=a,se.dragStart(ce,e,n))}}).bind("dragstop",function(t,e){ce&&(se.dragStop(ce,t,e),ce=null)})}function a(n,r){function a(){h=r.theme?"ui":"fc";var n=r.header;return n?g=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(i("left")).append(i("center")).append(i("right"))):e}function o(){g.remove()}function i(e){var a=t("<td class='fc-header-"+e+"'/>"),o=r.header[e];return o&&t.each(o.split(" "),function(e){e>0&&a.append("<span class='fc-header-space'/>");var o;t.each(this.split(","),function(e,i){if("title"==i)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(h+"-corner-right"),o=null;else{var s;if(n[i]?s=n[i]:Oe[i]&&(s=function(){c.removeClass(h+"-state-hover"),n.changeView(i)}),s){var l=r.theme?_(r.buttonIcons,i):null,f=_(r.buttonText,i),c=t("<span class='fc-button fc-button-"+i+" "+h+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":f)+"</span>").click(function(){c.hasClass(h+"-state-disabled")||s()}).mousedown(function(){c.not("."+h+"-state-active").not("."+h+"-state-disabled").addClass(h+"-state-down")}).mouseup(function(){c.removeClass(h+"-state-down")}).hover(function(){c.not("."+h+"-state-active").not("."+h+"-state-disabled").addClass(h+"-state-hover")},function(){c.removeClass(h+"-state-hover").removeClass(h+"-state-down")}).appendTo(a);P(c),o||c.addClass(h+"-corner-left"),o=c}}}),o&&o.addClass(h+"-corner-right")}),a}function s(t){g.find("h2").html(t)}function l(t){g.find("span.fc-button-"+t).addClass(h+"-state-active")}function f(t){g.find("span.fc-button-"+t).removeClass(h+"-state-active")}function c(t){g.find("span.fc-button-"+t).addClass(h+"-state-disabled")}function u(t){g.find("span.fc-button-"+t).removeClass(h+"-state-disabled")}function d(t,e){e?u(t):c(t)}var v=this;v.render=a,v.destroy=o,v.updateTitle=s,v.activateButton=l,v.deactivateButton=f,v.disableButton=c,v.enableButton=u,v.toggleEnable=d;var h,g=t([])}function o(n,r){function a(t,e){return!T||T>t||e>S}function o(t,e){T=t,S=e,z=[];var n=++H,r=F.length;R=r;for(var a=0;r>a;a++)i(F[a],n)}function i(e,r){s(e,function(a){if(r==H){if(a){n.eventDataTransform&&(a=t.map(a,n.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var o=0;a.length>o;o++)a[o].source=e,w(a[o]);z=z.concat(a)}R--,R||k(z)}})}function s(r,a){var o,i,l=Ee.sourceFetchers;for(o=0;l.length>o;o++){if(i=l[o](r,T,S,a),i===!0)return;if("object"==typeof i)return s(i,a),e}var f=r.events;if(f)t.isFunction(f)?(y(),f(d(T),d(S),function(t){a(t),m()})):t.isArray(f)?a(f):a();else{var c=r.url;if(c){var u,v=r.success,h=r.error,g=r.complete;u=t.isFunction(r.data)?r.data():r.data;var p=t.extend({},u||{}),w=V(r.startParam,n.startParam),D=V(r.endParam,n.endParam);w&&(p[w]=Math.round(+T/1e3)),D&&(p[D]=Math.round(+S/1e3)),y(),t.ajax(t.extend({},ke,r,{data:p,success:function(e){e=e||[];var n=I(v,this,arguments);t.isArray(n)&&(e=n),a(e)},error:function(){I(h,this,arguments),a()},complete:function(){I(g,this,arguments),m()}}))}else a()}}function l(t){t=f(t),t&&(R++,i(t,H))}function f(n){return t.isFunction(n)||t.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(D(n),F.push(n),n):e}function c(e){F=t.grep(F,function(t){return!b(t,e)}),z=t.grep(z,function(t){return!b(t.source,e)}),k(z)}function u(t){var e,n,r=z.length,a=O().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;r>e;e++)n=z[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),n.end=t.end?n.end?new Date(+n.end+i):new Date(+a(n)+i):null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,w(n));w(t),k(z)}function v(t,e){w(t),t.source||(e&&(x.events.push(t),t.source=x),z.push(t)),k(z)}function h(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}z=t.grep(z,e,!0);for(var r=0;F.length>r;r++)t.isArray(F[r].events)&&(F[r].events=t.grep(F[r].events,e,!0))}else{z=[];for(var r=0;F.length>r;r++)t.isArray(F[r].events)&&(F[r].events=[])}k(z)}function g(e){return t.isFunction(e)?t.grep(z,e):e?(e+="",t.grep(z,function(t){return t._id==e})):z}function y(){N++||E("loading",null,!0,O())}function m(){--N||E("loading",null,!1,O())}function w(t){var r=t.source||{},a=V(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+xe++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=p(t.start,a)),t.end=p(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=V(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function D(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Ee.sourceNormalizers,n=0;e.length>n;n++)e[n](t)}function b(t,e){return t&&e&&C(t)==C(e)}function C(t){return("object"==typeof t?t.events||t.url:"")||t}var M=this;M.isFetchNeeded=a,M.fetchEvents=o,M.addEventSource=l,M.removeEventSource=c,M.updateEvent=u,M.renderEvent=v,M.removeEvents=h,M.clientEvents=g,M.normalizeEvent=w;for(var T,S,E=M.trigger,O=M.getView,k=M.reportEvents,x={events:[]},F=[x],H=0,R=0,N=0,z=[],W=0;r.length>W;W++)f(r[W])}function i(t,e,n){return t.setFullYear(t.getFullYear()+e),n||u(t),t}function s(t,e,n){if(+t){var r=t.getMonth()+e,a=d(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||u(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(a>t?1:-1))}return t}function l(t,e,n){if(+t){var r=t.getDate()+e,a=d(t);a.setHours(9),a.setDate(r),t.setDate(r),n||u(t),f(t,a)}return t}function f(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*Re)}function c(t,e){return t.setMinutes(t.getMinutes()+e),t}function u(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?u(new Date(+t)):new Date(+t)}function v(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function h(t,e){return Math.round((d(t,!0)-d(e,!0))/He)}function g(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function p(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),y(t,n)||(t?new Date(t):null)):null}function y(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),f(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),f(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+1e3*60*o)}return r}function m(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function w(t,e,n){return D(t,null,e,n)}function D(t,e,n,r){r=r||Te;var a,o,i,s,l=t,f=e,c=n.length,u="";for(a=0;c>a;a++)if(o=n.charAt(a),"'"==o){for(i=a+1;c>i;i++)if("'"==n.charAt(i)){l&&(u+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;c>i;i++)if(")"==n.charAt(i)){var d=w(l,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(u+=d),a=i;break}}else if("["==o){for(i=a+1;c>i;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i),d=w(l,v,r);d!=w(f,v,r)&&(u+=d),a=i;break}}else if("{"==o)l=e,f=t;else if("}"==o)l=t,f=e;else{for(i=c;i>a;i--)if(s=ze[n.substring(a,i)]){l&&(u+=s(l,r)),a=i-1;break}i==a&&l&&(u+=o)}return u}function b(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function C(t){return t.end?M(t.end,t.allDay):l(d(t.start),1)}function M(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?l(t,1):u(t)}function T(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,l=n.target;l!=this;)o=l,l=l.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function S(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.width(Math.max(0,n-O(a,r)))}function E(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.height(Math.max(0,n-H(a,r)))}function O(t,e){return k(t)+F(t)+(e?x(t):0)}function k(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function x(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function F(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function H(t,e){return R(t)+z(t)+(e?N(t):0)}function R(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function N(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function z(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function W(){}function Y(t,e){return t-e}function A(t){return Math.max.apply(Math,t)}function L(t){return(10>t?"0":"")+t}function _(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if(r=t[a[o].toLowerCase()],r!==e)return r;return t[""]}function q(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function P(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function j(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function B(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),f=[];return i&&f.push("background-color:"+i),s&&f.push("border-color:"+s),l&&f.push("color:"+l),f.join(";")}function I(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;e.length>a;a++)o=e[a].apply(n,r)||o;return o}}function V(){for(var t=0;arguments.length>t;t++)if(arguments[t]!==e)return arguments[t]}function G(t,e){function n(t,e){e&&(s(t,e),t.setDate(1));var n=a("firstDay"),u=d(t,!0);u.setDate(1);var v=s(d(u),1),g=d(u);l(g,-((g.getDay()-n+7)%7)),i(g);var p=d(v);l(p,(7-p.getDay()+n)%7),i(p,-1,!0);var y=f(),m=Math.round(h(p,g)/7);"fixed"==a("weekMode")&&(l(p,7*(6-m)),m=6),r.title=c(u,a("titleFormat")),r.start=u,r.end=v,r.visStart=g,r.visEnd=p,o(m,y,!0)}var r=this;r.render=n,U.call(r,t,e,"month");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,f=r.getCellsPerWeek,c=e.formatDate}function X(t,e){function n(t,e){e&&l(t,7*e);var n=l(d(t),-((t.getDay()-a("firstDay")+7)%7)),c=l(d(n),7),u=d(n);i(u);var v=d(c);i(v,-1,!0);var h=s();r.start=n,r.end=c,r.visStart=u,r.visEnd=v,r.title=f(u,l(d(v),-1),a("titleFormat")),o(1,h,!1)}var r=this;r.render=n,U.call(r,t,e,"basicWeek");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=r.getCellsPerWeek,f=e.formatDates}function J(t,e){function n(t,e){e&&l(t,e),i(t,0>e?-1:1);var n=d(t,!0),f=l(d(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=f,o(1,1,!1)}var r=this;r.render=n,U.call(r,t,e,"basicDay");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=e.formatDate}function U(e,n,r){function a(t,e,n){ee=t,ne=e,re=n,o(),B||i(),s()}function o(){le=he("theme")?"ui":"fc",fe=he("columnFormat"),ce=he("weekNumbers"),ue=he("weekNumberTitle"),de="iso"!=he("weekNumberCalculation")?"w":"W"}function i(){U=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function s(){var n=f();A&&A.remove(),A=t(n).appendTo(e),L=A.find("thead"),_=L.find(".fc-day-header"),B=A.find("tbody"),I=B.find("tr"),V=B.find(".fc-day"),G=I.find("td:first-child"),X=I.eq(0).find(".fc-day > div"),J=I.eq(0).find(".fc-day-content > div"),j(L.add(L.find("tr"))),j(I),I.eq(0).addClass("fc-first"),I.filter(":last").addClass("fc-last"),V.each(function(e,n){var r=Te(Math.floor(e/ne),e%ne);ge("dayRender",Y,r,t(n))}),m(V)}function f(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+c()+v()+"</table>";return t}function c(){var t,e,n=le+"-widget-header",r="";for(r+="<thead><tr>",ce&&(r+="<th class='fc-week-number "+n+"'>"+q(ue)+"</th>"),t=0;ne>t;t++)e=Te(0,t),r+="<th class='fc-day-header fc-"+Fe[e.getDay()]+" "+n+"'>"+q(Oe(e,fe))+"</th>";return r+="</tr></thead>"}function v(){var t,e,n,r=le+"-widget-content",a="";for(a+="<tbody>",t=0;ee>t;t++){for(a+="<tr class='fc-week'>",ce&&(n=Te(t,0),a+="<td class='fc-week-number "+r+"'>"+"<div>"+q(Oe(n,de))+"</div>"+"</td>"),e=0;ne>e;e++)n=Te(t,e),a+=h(n);a+="</tr>"}return a+="</tbody>"}function h(t){var e=le+"-widget-content",n=Y.start.getMonth(),r=u(new Date),a="",o=["fc-day","fc-"+Fe[t.getDay()],e];return t.getMonth()!=n&&o.push("fc-other-month"),+t==+r?o.push("fc-today",le+"-state-highlight"):r>t?o.push("fc-past"):o.push("fc-future"),a+="<td class='"+o.join(" ")+"'"+" data-date='"+Oe(t,"yyyy-MM-dd")+"'"+">"+"<div>",re&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function g(e){Q=e;var n,r,a,o=Q-L.height();"variable"==he("weekMode")?n=r=Math.floor(o/(1==ee?2:6)):(n=Math.floor(o/ee),r=o-n*(ee-1)),G.each(function(e,o){ee>e&&(a=t(o),a.find("> div").css("min-height",(e==ee-1?r:n)-H(a)))})}function p(t){$=t,ie.clear(),se.clear(),te=0,ce&&(te=L.find("th.fc-week-number").outerWidth()),K=Math.floor(($-te)/ne),S(_.slice(0,-1),K)}function m(t){t.click(w).mousedown(Ce)}function w(e){if(!he("selectable")){var n=y(t(this).data("date"));ge("dayClick",this,n,!0,e)}}function D(t,e,n){n&&ae.build();for(var r=Ee(t,e),a=0;r.length>a;a++){var o=r[a];m(b(o.row,o.leftCol,o.row,o.rightCol))}}function b(t,n,r,a){var o=ae.rect(t,n,r,a,e);return pe(o,e)}function C(t){return d(t)}function M(t,e){D(t,l(d(e),1),!0)}function T(){ye()}function E(t,e,n){var r=Se(t),a=V[r.row*ne+r.col];ge("dayClick",a,t,e,n)}function O(t,e){oe.start(function(t){ye(),t&&b(t.row,t.col,t.row,t.col)},e)}function k(t,e,n){var r=oe.stop();if(ye(),r){var a=Te(r);ge("drop",t,a,!0,e,n)}}function x(t){return d(t.start)}function F(t){return ie.left(t)}function R(t){return ie.right(t)}function N(t){return se.left(t)}function z(t){return se.right(t)}function W(t){return I.eq(t)}var Y=this;Y.renderBasic=a,Y.setHeight=g,Y.setWidth=p,Y.renderDayOverlay=D,Y.defaultSelectionEnd=C,Y.renderSelection=M,Y.clearSelection=T,Y.reportDayClick=E,Y.dragStart=O,Y.dragStop=k,Y.defaultEventEnd=x,Y.getHoverListener=function(){return oe},Y.colLeft=F,Y.colRight=R,Y.colContentLeft=N,Y.colContentRight=z,Y.getIsCellAllDay=function(){return!0},Y.allDayRow=W,Y.getRowCnt=function(){return ee},Y.getColCnt=function(){return ne},Y.getColWidth=function(){return K},Y.getDaySegmentContainer=function(){return U},ve.call(Y,e,n,r),we.call(Y),me.call(Y),Z.call(Y);var A,L,_,B,I,V,G,X,J,U,$,Q,K,te,ee,ne,re,ae,oe,ie,se,le,fe,ce,ue,de,he=Y.opt,ge=Y.trigger,pe=Y.renderOverlay,ye=Y.clearOverlays,Ce=Y.daySelectionMousedown,Te=Y.cellToDate,Se=Y.dateToCell,Ee=Y.rangeToSegments,Oe=n.formatDate;P(e.addClass("fc-grid")),ae=new De(function(e,n){var r,a,o;_.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),I.each(function(n,i){ee>n&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),oe=new be(ae),ie=new Me(function(t){return X.eq(t)}),se=new Me(function(t){return J.eq(t)})}function Z(){function t(t,e){n.renderDayEvents(t,e)}function e(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t,n.clearEvents=e,he.call(n)}function $(t,e){function n(t,e){var n=a("firstMonth")||0,l=a("lastMonth")||n+12,f=l-n,c=d(t,!0);c.setFullYear(t.getFullYear(),l,0,12),e?i(t,e):n>0&&t.getMonth()<=c.getMonth()&&i(t,-1);var u=d(t,!0);u.setFullYear(u.getFullYear(),n,1,12);var v=d(t);v.setFullYear(v.getFullYear(),l,0,12);var h=a("yearColumns")||3;r.title=s(u,a("titleFormat")),n+f>12&&(r.title+=s(v," - yyyy")),r.start=u,r.end=v,o(h,!0)}var r=this;r.render=n,Q.call(r,t,e,"year");var a=r.opt,o=r.renderYear,s=e.formatDate}function Q(e,n,r){function a(t,e){o(),i();var n=!de;n||(ie(),de.remove());var r=parseInt(t,10);s(r,e),f(),ae("debug")&&c(),B()}function o(){ze=ae("firstDay")||0,We=ae("firstMonth")||0,Ye=ae("lastMonth")||We+12,Ae=ae("hiddenMonths")||[],Pe=ae("yearCellMinH")||20,qe=ae("columnFormat")||"MMMM",je=ae("weekNumbers"),Be=ae("weekNumberTitle"),Ie="iso"!=ae("weekNumberCalculation")?"w":"W",Le=ae("weekends")?0:1,He=ae("isRTL"),_e=ae("theme")?"ui":"fc",Oe=Le?5:7,He?(Re=-1,Ne=Oe-1):(Re=1,Ne=0)}function i(){var t=d(te.start),e=d(te.end);k(t),l(e,14),k(e),te.skipHiddenDays(e,-1,!0),te.visStart=t,te.visEnd=e}function s(r,a){var o,i,s,f,c,u,v,h,g,y,m,w=_e+"-widget-header",D=_e+"-widget-content",b=0,C=d(te.start),M=C.getFullYear(),T=Ye-We;Ee=0;var S=[];for(u=0;7>u;u++)C.setFullYear(2013,11,1+u,12),S[u]=ue(C,"ddd");for(C=d(te.start),o='<table class="fc-year-main-table fc-border-separate" style="width:100%;"><tr>',o+='<td class="fc-year-month-border fc-first"></td>',v=0,u=We;Ye>u;u++){var E=-1!=t.inArray(u,Ae),O=E?"display:none;":"";for(C.setFullYear(M,u,1,12),h=C.getFullYear(),y=ue(C,"yyyyMM"),g=ue(C,"MMMM"),We+T>12&&(g=g+" "+h),k(C),0===v%r&&v>0&&!E&&(b++,o+='<td class="fc-year-month-border fc-last"></td></tr><tr><td class="fc-year-month-border fc-first"></td>'),r>v%r&&v%r>0&&!E&&(o+='<td class="fc-year-month-separator"></td>'),o+='<td class="fc-year-monthly-td" style="'+O+'">',o+='<table class="fc-border-separate fc-year-month" style="width:100%;" cellspacing="0"><thead><tr><td colspan="7" class="fc-year-monthly-header" /><div class="fc-year-monthly-name'+(0===b?" fc-first":"")+'">'+'<a name="'+y+'" data-year="'+h+'" data-month="'+u%12+'" href="javascript:;">'+q(g)+"</a>"+"</div>"+"</td></tr>"+"<tr>",je&&(o+="<th class='fc-week-number "+w+"'>"+q(Be)+"</th>"),f=ze;ze+7>f;f++)(!Le||0!==f%7&&6!==f%7)&&(o+='<th class="fc-year-weekly-head fc-'+Fe[f%7]+" "+w+'" width="'+(0|100/Oe)+'%">'+S[f%7]+"</th>");for(o+="</tr></thead><tbody>",Xe[u]=0,f=0;6>f;f++)if(Le&&x(C),C.getMonth()!=(u+1)%12||"fixed"==ae("weekMode")){for(Xe[u]++,Ee++,o+='<tr class="fc-week'+f+'">',je&&(o+="<td class='fc-week-number "+D+"'>"+"<div>"+q(ue(C,Ie))+"</div>"+"</td>"),c=0;Oe>c;c++)m=C.getMonth()==u%12?ue(C,"-yyyy-MM-dd"):"",o+='<td class="'+D+" fc-day fc-"+Fe[C.getDay()]+" fc-day"+m+'">'+"<div>"+(a?'<div class="fc-day-number"/>':"")+'<div class="fc-day-content" style="min-height:'+Pe+'px;">'+'<div style="position:relative;"></div>'+"</div>"+"</div>"+"</td>",l(C,1),Le&&x(C);o+="</tr>"}o+="</tbody></table>",o+='<div class="fc-year-monthly-footer"></div>',o+="</td>",E||v++}o+='<td class="fc-year-month-border fc-last"></td>',o+="</tr></table>",de=t(o).appendTo(e),i=de.find("thead"),s=i.find("th.fc-year-weekly-head"),he=de.find("table tbody tr"),pe=he.find("td").not(".fc-year-monthly-td"),ge=de.find("table"),ge.find("tbody .fc-week0").addClass("fc-first"),ge.find("tbody > tr:last").addClass("fc-last"),ye=ge.find("tbody .fc-week0 .fc-day-content div"),j(i.add(i.find("tr"))),j(he),de.find(".fc-year-monthly-name a").click(function(){n.changeView("month"),n.gotoDate(t(this).attr("data-year"),t(this).attr("data-month"),15)}),p(pe),Ce=t('<div style="position:absolute;z-index:8;top:0;left:0;"/>').appendTo(e)}function f(){var e=u(new Date),n=d(te.start),r=n.getFullYear();ge.each(function(a,o){var i=0,s=a+We;n.setFullYear(r,s,1,12),k(n),Ge[s]=[0,0,-1,-1],Ge[s+1]=[0,0,-1,-1],t(o).find("tbody > tr").each(function(r,a){t(a).find("td").not(".fc-week-number").each(function(r,a){var o=t(a);W(n,s)?(0>Ge[s][2]&&(Ge[s][2]=n.getDate()-1),i=n.getDate()):(o.addClass("fc-other-month"),n.getMonth()==(s+11)%12?Ge[s][0]++:Ge[s][1]++),+n==+e?o.addClass(_e+"-state-highlight fc-today"):o.addClass(+e>+n?"fc-past":"fc-future");var f=n.getDate();o.find("div.fc-day-number").text(f),l(n,1),Le&&x(n)})});var f=z(te.start.getFullYear(),s+1)-i;Ge[s][3]=f}),he.filter(".fc-year-have-event").removeClass("fc-year-have-event")}function c(){u(new Date);var e=d(te.start),n=e.getFullYear();ge.each(function(r,a){var o=r+We;e.setFullYear(n,o,1,12),k(e),t(a).find("tbody > tr").each(function(n,r){t(r).find("td").not(".fc-week-number").each(function(n,r){var a=t(r),o=e.getDate(),i=te.dateToDayOffset(e),s=F(i);o=o+"\n"+s+"-"+i+"/"+R(s),a.find("div.fc-day-number").text(o),l(e,1),Le&&x(e)})})}),he.filter(".fc-year-have-event").removeClass("fc-year-have-event")}function v(){}function g(t){Te=t,xe.clear()}function p(t){t.click(y).mousedown(ce)}function y(t){if(!ae("selectable")){var e=this.className.match(/fc\-day\-(\d+)\-(\d+)\-(\d+)/);if(null!=e){var n=new Date(e[1],e[2]-1,e[3]);oe("dayClick",this,n,!0,t)}}}function m(t,e){if(isFinite(t))for(var n=te.rangeToSegments(t,e),r=0;n.length>r;r++){var a=n[r],o=Ve[a.gridOffset],i=A(a.row);p(w(o,i,a.leftCol,i,a.rightCol))}}function w(t,n,r,a,o){var i=t.rect(n,r,a,o,e);return se(i,e)}function D(e){return t(ge[0|e/5]).width()}function b(t){return d(t)}function C(t,e){m(t,l(d(e),1))}function M(){le()}function T(t,e,n){var r=J(t),a=pe[r.row*Oe+r.col];oe("dayClick",a,t,e,n)}function S(t,e){ke.start(function(t){le(),t&&w(t.grid,t.row,t.col,t.row,t.col)},e)}function E(t,e,n){var r=ke.stop();if(le(),r){var a=te.cellToCellOffset(r),o=te.cellOffsetToDayOffset(a),i=te.dayOffsetToDate(o);oe("drop",t,i,!0,e,n)}}function O(t){return Xe[t]*(Le?5:7)}function k(t){for(;t.getDay()!=ze;)l(t,-1);Le&&x(t)}function x(t,e,n){for(e=e||1;!t.getDay()||n&&1==t.getDay()||!n&&6==t.getDay();)l(t,e);return t}function F(t){var e,n,r=0,a=t-Ge[We][0];if(Ge[We][0]>t)return ne(t);for(e=We;Ye>e;e++){var o=z(te.start.getFullYear(),e+1),i=new Date(te.start.getFullYear(),e,1,12,0);if(o>a||e==Ye-1){for(r+=Ge[e][0],n=0;a>n;n++)Le&&fe(i)||(r+=1),l(i,1);return r}a-=o,r+=O(e)}}function H(t,e,n){var r=He?-1:1,a=He?Oe-1:0;"object"==typeof t&&(n=t.grid.offset,e=t.col,t=t.row);for(var o=0,i=0;(n||0)>i;i++)o+=O(i+We);return o+=t*Oe+(e*r+a)}function R(t){var e=t,n=Ge[We][0];if(n>t)return ee(t);for(var r=0,a=We;Ye>a;a++){var o=z(te.start.getFullYear(),a+1),i=O(a);if(i>e){e-=Ge[a][0],e+=Ge[a][2];for(var s=new Date(te.start.getFullYear(),a,1,12);e>0||Le&&fe(s);)Le&&fe(s)||(e-=1),l(s,1),n+=1;return n}r+=o,e-=i,n+=o}}function N(e,n){var r=[],a=d(n);if(l(a,-1),te.visStart>a||e>te.visEnd)return r;var o=te.dateToDayOffset(e),i=te.dateToDayOffset(n);Le&&fe(a)&&(x(a,-1),l(a,1),i=te.dateToDayOffset(a));for(var s,f=te.dayOffsetToCellOffset(o),c=te.dayOffsetToCellOffset(i-1),u=!1,v=0;Ee>v;v++){var h=v*Oe,g=h+Oe-1,p=Math.max(f,h),y=Math.min(c,g);if(y>=p){var m=te.rowToGridOffset(v),w=A(v),D=p-f,b=!1;!w&&r.length&&D>=0&&14>=D&&Ge[m+We][0]>1&&(p=Math.min(f,h));for(var C=te.cellOffsetToCell(p),M=te.cellOffsetToCell(y),T=[C.col,M.col].sort(),S=te.cellOffsetToDayOffset(y);S>=i;)if(T[1]--,S--,T[1]<T[0]){b=!0;break}s=te.cellOffsetToDayOffset(p)==o,u=S+1==i,-1!=t.inArray(We+m,Ae)&&(b=!0),!b&&m>=0&&r.push({gridOffset:m,row:v,leftCol:T[0],rightCol:T[1],isStart:s,isEnd:u})}}return r}function z(t,e){return new Date(t,e,0).getDate()}function W(t,e){var n=t.getFullYear()-te.start.getFullYear();return t.getMonth()==e-12*n}function Y(t){for(var e=0,n=-1,r=We;Ye>r;r++)if(e+=Xe[r],e>t){n=r-We;break}return n}function A(t){for(var e=0,n=-1,r=We;Ye>r;r++)if(e+=Xe[r],e>t){n=t-(e-Xe[r]);break}return n}function L(t){return d(t.start)}function _(e){return t(ge[e])}function B(){for(var e=[],n=We;Ye>n;n++)e.push(n);Ve=[],t.each(e,function(e){var n=new De(function(n,r){var a,o,i,s=_(e),l=s.find("thead"),f=l.find("th.fc-year-weekly-head"),c=s.find("tbody tr");f.each(function(e,n){a=t(n),o=a.offset().left,i=[o,o+a.outerWidth()],r[e]=i}),c.each(function(e,r){Ee>e&&(a=t(r),o=a.offset().top,i=[o,o+a.outerHeight()],n[e]=i)})});n.offset=e,Ve.push(n)}),te.refreshCoordGrids=!1,ke=new be(Ve)}function I(t,e){var n=_(e);return xe.left(t)+n.position().left}function V(t,e){var n=_(e);return xe.right(t)+n.position().left}function G(t,e){return I(t,e)}function X(t,e){return V(t,e)}function J(t){return{row:Math.floor(h(t,te.visStart)/7),col:U(t.getDay())}}function U(t){return(t-Math.max(ze,Le)+Oe)%Oe*Re+Ne}function $(t){return he.eq(t)}function Q(){return{left:0,right:Te}}function K(t){var e=n.getView().name;if(re(t),We>0&&"year"==e&&t!=e){var r=u(new Date);n.gotoDate(r)}}var te=this;te.renderYear=a,te.setHeight=v,te.setWidth=g,te.renderDayOverlay=m,te.defaultSelectionEnd=b,te.renderSelection=C,te.clearSelection=M,te.reportDayClick=T,te.defaultEventEnd=L,te.getHoverListener=function(){return ke},te.colContentLeft=I,te.colContentRight=V,te.colLeft=G,te.colRight=X,te.dayOfWeekCol=U,te.dateCell=J,te.allDayRow=$,te.allDayBounds=Q,te.getIsCellAllDay=function(){return!0},te.getRowCnt=function(){return Ee},te.getColCnt=function(){return Oe},te.getColWidth=function(){return Se},te.getBodyRows=function(){return he},te.getDaySegmentContainer=function(){return Ce},te.getRowMaxWidth=D,ve.call(te,e,n,r),we.call(te),me.call(te),te.rangeToSegments=N,Z.call(te),te.rowToGridOffset=Y,te.cellToCellOffset=H,te.dragStart=S,te.dragStop=E;var ee=te.cellOffsetToDayOffset;te.cellOffsetToDayOffset=R;var ne=te.dayOffsetToCellOffset;te.dayOffsetToCellOffset=F;var re=n.changeView;n.changeView=K;var ae=te.opt,oe=te.trigger,ie=te.clearEvents,se=te.renderOverlay,le=te.clearOverlays,fe=te.isHiddenDay,ce=te.daySelectionMousedown,ue=n.formatDate;te.cellToDate;var de,he,ge,pe,ye,Ce,Te,Se,Ee,Oe,ke,xe,He,Re,Ne,ze,We,Ye,Ae,Le,_e,qe,Pe,je,Be,Ie,Ve=[],Ge=[],Xe=[];P(e.addClass("fc-grid")),xe=new Me(function(t){return ye.eq(t)})}function K(t,e){function n(t,e){e&&l(t,7*e);var n=l(d(t),-((t.getDay()-a("firstDay")+7)%7)),c=l(d(n),7),u=d(n);i(u);var v=d(c);i(v,-1,!0);var h=s();r.title=f(u,l(d(v),-1),a("titleFormat")),r.start=n,r.end=c,r.visStart=u,r.visEnd=v,o(h)}var r=this;r.render=n,ee.call(r,t,e,"agendaWeek");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=r.getCellsPerWeek,f=e.formatDates}function te(t,e){function n(t,e){e&&l(t,e),i(t,0>e?-1:1);var n=d(t,!0),f=l(d(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=f,o(1)}var r=this;r.render=n,ee.call(r,t,e,"agendaDay");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=e.formatDate}function ee(n,r,a){function o(t){ze=t,i(),K?f():s()}function i(){qe=Je("theme")?"ui":"fc",Pe=Je("isRTL"),je=m(Je("minTime")),Be=m(Je("maxTime")),Ie=Je("columnFormat"),Ve=Je("weekNumbers"),Ge=Je("weekNumberTitle"),Xe="iso"!=Je("weekNumberCalculation")?"w":"W",He=Je("snapMinutes")||Je("slotMinutes")}function s(){var e,r,a,o,i,s=qe+"-widget-header",l=qe+"-widget-content",u=0==Je("slotMinutes")%15;for(f(),fe=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Je("allDaySlot")?(ce=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(fe),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Je("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",ue=t(e).appendTo(fe),de=ue.find("tr"),C(de.find("td")),fe.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):ce=t([]),he=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(fe),ge=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(he),pe=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ge),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=v(),o=c(d(r),Be),c(r,je),We=0,a=0;o>r;a++)i=r.getMinutes(),e+="<tr class='fc-slot"+a+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(u&&i?"&nbsp;":on(r,Je("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",c(r,Je("slotMinutes")),We++;
e+="</tbody></table>",ye=t(e).appendTo(ge),M(ye.find("td"))}function f(){var e=h();K&&K.remove(),K=t(e).appendTo(n),te=K.find("thead"),ee=te.find("th").slice(1,-1),re=K.find("tbody"),ae=re.find("td").slice(0,-1),oe=ae.find("> div"),ie=ae.find(".fc-day-content > div"),se=ae.eq(0),le=oe.eq(0),j(te.add(te.find("tr"))),j(re.add(re.find("tr")))}function h(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+g()+p()+"</table>";return t}function g(){var t,e,n,r=qe+"-widget-header",a="";for(a+="<thead><tr>",Ve?(t=nn(0,0),e=on(t,Xe),Pe?e+=Ge:e=Ge+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+q(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;ze>n;n++)t=nn(0,n),a+="<th class='fc-"+Fe[t.getDay()]+" fc-col"+n+" "+r+"'>"+q(on(t,Ie))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function p(){var t,e,n,r,a,o=qe+"-widget-header",i=qe+"-widget-content",s=u(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n="",e=0;ze>e;e++)t=nn(0,e),a=["fc-col"+e,"fc-"+Fe[t.getDay()],i],+t==+s?a.push(qe+"-state-highlight","fc-today"):s>t?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function y(t){t===e&&(t=Se),Se=t,sn={};var n=re.position().top,r=he.position().top,a=Math.min(t-n,ye.height()+r+1);le.height(a-H(se)),fe.css("top",n),he.height(a-r-1),xe=ye.find("tr:first").height()+1,Re=Je("slotMinutes")/He,Ne=xe/Re}function w(e){Te=e,Le.clear(),_e.clear();var n=te.find("th:first");ue&&(n=n.add(ue.find("th:first"))),n=n.add(ye.find("th:first")),Ee=0,S(n.width("").each(function(e,n){Ee=Math.max(Ee,t(n).outerWidth())}),Ee);var r=K.find(".fc-agenda-gutter");ue&&(r=r.add(ue.find("th.fc-agenda-gutter")));var a=he[0].clientWidth;ke=he.width()-a,ke?(S(r,ke),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),Oe=Math.floor((a-Ee)/ze),S(ee.slice(0,-1),Oe)}function D(){function t(){he.scrollTop(r)}var e=v(),n=d(e);n.setHours(Je("firstHour"));var r=L(e,n)+1;t(),setTimeout(t,0)}function b(){D()}function C(t){t.click(T).mousedown(tn)}function M(t){t.click(T).mousedown(J)}function T(t){if(!Je("selectable")){var e=Math.min(ze-1,Math.floor((t.pageX-K.offset().left-Ee)/Oe)),n=nn(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Je("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+je),Ue("dayClick",ae[e],n,!1,t)}else Ue("dayClick",ae[e],n,!0,t)}}function O(t,e,n){n&&Ye.build();for(var r=an(t,e),a=0;r.length>a;a++){var o=r[a];C(k(o.row,o.leftCol,o.row,o.rightCol))}}function k(t,e,n,r){var a=Ye.rect(t,e,n,r,fe);return Ze(a,fe)}function x(t,e){for(var n=0;ze>n;n++){var r=nn(0,n),a=l(d(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(i>o){var s=Ye.rect(0,n,0,n,ge),f=L(r,o),c=L(r,i);s.top=f,s.height=c-f,M(Ze(s,ge))}}}function F(t){return Le.left(t)}function R(t){return _e.left(t)}function N(t){return Le.right(t)}function z(t){return _e.right(t)}function W(t){return Je("allDaySlot")&&!t.row}function A(t){var e=nn(0,t.col),n=t.row;return Je("allDaySlot")&&n--,n>=0&&c(e,je+n*He),e}function L(t,n){if(t=d(t,!0),c(d(t),je)>n)return 0;if(n>=c(d(t),Be))return ye.height();var r=Je("slotMinutes"),a=60*n.getHours()+n.getMinutes()-je,o=Math.floor(a/r),i=sn[o];return i===e&&(i=sn[o]=ye.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+xe*(a%r/r)))}function _(){return de}function B(t){var e=d(t.start);return t.allDay?e:c(e,Je("defaultEventMinutes"))}function I(t,e){return e?d(t):c(d(t),Je("slotMinutes"))}function V(t,e,n){n?Je("allDaySlot")&&O(t,l(d(e),1),!0):G(t,e)}function G(e,n){var r=Je("selectHelper");if(Ye.build(),r){var a=rn(e).col;if(a>=0&&ze>a){var o=Ye.rect(0,a,0,a,ge),i=L(e,e),s=L(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",Ce=t(l).css(o).appendTo(ge))}else o.isStart=!0,o.isEnd=!0,Ce=t(en({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o)),Ce.css("opacity",Je("dragOpacity"));Ce&&(M(Ce),ge.append(Ce),S(Ce,o.width,!0),E(Ce,o.height,!0))}}}else x(e,n)}function X(){$e(),Ce&&(Ce.remove(),Ce=null)}function J(n){if(1==n.which&&Je("selectable")){Ke(n);var r,a=!1;Ae.start(function(t,n){if(X(),t&&t.col==n.col&&!W(t)){var o=A(n),i=A(t);r=[o,c(d(o),He),i,c(d(i),He)].sort(Y);var s=Je("minDate"),l=Je("maxDate");if(s&&s>r[0]||l&&r[1]>=l)return a=!0,e;G(r[0],r[3])}else r=null},n),t(document).one("mouseup",function(t){Ae.stop(),!a&&r&&(+r[0]==+r[1]&&U(r[0],!1,t),Qe(r[0],r[3],!1,t))})}}function U(t,e,n){Ue("dayClick",ae[rn(t).col],t,e,n)}function Z(t,e){Ae.start(function(t){if($e(),t)if(W(t))k(t.row,t.col,t.row,t.col);else{var e=A(t),n=c(d(e),Je("defaultEventMinutes"));x(e,n)}},e)}function $(t,e,n){var r=Ae.stop();$e(),r&&Ue("drop",t,A(r),W(r),e,n)}var Q=this;Q.renderAgenda=o,Q.setWidth=w,Q.setHeight=y,Q.afterRender=b,Q.defaultEventEnd=B,Q.timePosition=L,Q.getIsCellAllDay=W,Q.allDayRow=_,Q.getCoordinateGrid=function(){return Ye},Q.getHoverListener=function(){return Ae},Q.colLeft=F,Q.colRight=N,Q.colContentLeft=R,Q.colContentRight=z,Q.getDaySegmentContainer=function(){return ce},Q.getSlotSegmentContainer=function(){return pe},Q.getMinMinute=function(){return je},Q.getMaxMinute=function(){return Be},Q.getSlotContainer=function(){return ge},Q.getRowCnt=function(){return 1},Q.getColCnt=function(){return ze},Q.getColWidth=function(){return Oe},Q.getSnapHeight=function(){return Ne},Q.getSnapMinutes=function(){return He},Q.defaultSelectionEnd=I,Q.renderDayOverlay=O,Q.renderSelection=V,Q.clearSelection=X,Q.reportDayClick=U,Q.dragStart=Z,Q.dragStop=$,ve.call(Q,n,r,a),we.call(Q),me.call(Q),ne.call(Q);var K,te,ee,re,ae,oe,ie,se,le,fe,ce,ue,de,he,ge,pe,ye,Ce,Te,Se,Ee,Oe,ke,xe,He,Re,Ne,ze,We,Ye,Ae,Le,_e,qe,Pe,je,Be,Ie,Ve,Ge,Xe,Je=Q.opt,Ue=Q.trigger,Ze=Q.renderOverlay,$e=Q.clearOverlays,Qe=Q.reportSelection,Ke=Q.unselect,tn=Q.daySelectionMousedown,en=Q.slotSegHtml,nn=Q.cellToDate,rn=Q.dateToCell,an=Q.rangeToSegments,on=r.formatDate,sn={};P(n.addClass("fc-agenda")),Ye=new De(function(e,n){function r(t){return Math.max(l,Math.min(f,t))}var a,o,i;ee.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),Je("allDaySlot")&&(a=de,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=ge.offset().top,l=he.offset().top,f=l+he.outerHeight(),c=0;We*Re>c;c++)e.push([r(s+Ne*c),r(s+Ne*(c+1))])}),Ae=new be(Ye),Le=new Me(function(t){return oe.eq(t)}),_e=new Me(function(t){return ie.eq(t)})}function ne(){function n(t,e){var n,r=t.length,o=[],i=[];for(n=0;r>n;n++)t[n].allDay?o.push(t[n]):i.push(t[n]);m("allDaySlot")&&(te(o,e),k()),s(a(i),e)}function r(){x().empty(),F().empty()}function a(e){var n,r,a,s,l,f=P(),u=z(),v=N(),h=t.map(e,i),g=[];for(r=0;f>r;r++)for(n=_(0,r),c(n,u),l=o(e,h,n,c(d(n),v-u)),l=re(l),a=0;l.length>a;a++)s=l[a],s.col=r,g.push(s);return g}function o(t,e,n,r){var a,o,i,s,l,f,c,u,v=[],h=t.length;for(a=0;h>a;a++)o=t[a],i=o.start,s=e[a],s>n&&r>i&&(n>i?(l=d(n),c=!1):(l=i,c=!0),s>r?(f=d(r),u=!1):(f=s,u=!0),v.push({event:o,start:l,end:f,isStart:c,isEnd:u}));return v.sort(de)}function i(t){return t.end?d(t.end):c(d(t.start),m("defaultEventMinutes"))}function s(n,r){var a,o,i,s,l,c,d,v,h,g,p,y,D,b,C,M,S=n.length,E="",k=F(),x=m("isRTL");for(a=0;S>a;a++)o=n[a],i=o.event,s=W(o.start,o.start),l=W(o.start,o.end),c=A(o.col),d=L(o.col),v=d-c,d-=.025*v,v=d-c,h=v*(o.forwardCoord-o.backwardCoord),m("slotEventOverlap")&&(h=Math.max(2*(h-10),h)),x?(p=d-o.backwardCoord*v,g=p-h):(g=c+o.backwardCoord*v,p=g+h),g=Math.max(g,c),p=Math.min(p,d),h=p-g,o.top=s,o.left=g,o.outerWidth=h,o.outerHeight=l-s,E+=f(i,o);for(k[0].innerHTML=E,y=k.children(),a=0;S>a;a++)o=n[a],i=o.event,D=t(y[a]),b=w("eventRender",i,i,D),b===!1?D.remove():(b&&b!==!0&&(D.remove(),D=t(b).css({position:"absolute",top:o.top,left:o.left}).appendTo(k)),o.element=D,i._id===r?u(i,D,o):D[0]._fci=a,X(i,D));for(T(k,n,u),a=0;S>a;a++)o=n[a],(D=o.element)&&(o.vsides=H(D,!0),o.hsides=O(D,!0),C=D.find(".fc-event-title"),C.length&&(o.contentTop=C[0].offsetTop));for(a=0;S>a;a++)o=n[a],(D=o.element)&&(D[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",M=Math.max(0,o.outerHeight-o.vsides),D[0].style.height=M+"px",i=o.event,o.contentTop!==e&&10>M-o.contentTop&&(D.find("div.fc-event-time").text(ne(i.start,m("timeFormat"))+" - "+i.title),D.find("div.fc-event-title").remove()),w("eventAfterRender",i,i,D))}function f(t,e){var n="<",r=t.url,a=B(t,m),o=["fc-event","fc-event-vert"];return D(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+q(t.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+e.top+"px;"+"left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+q(ae(t.start,t.end,m("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+q(t.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&b(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function u(t,e,n){var r=e.find("div.fc-event-time");D(t)&&g(t,e,r),n.isEnd&&b(t)&&p(t,e,r),S(t,e)}function v(t,e,n){function r(){f||(e.width(a).height("").draggable("option","grid",null),f=!0)}var a,o,i,s=n.isStart,f=!0,c=R(),u=j(),v=I(),g=V(),p=z();e.draggable({opacity:m("dragOpacity","month"),revertDuration:m("dragRevertDuration"),start:function(n,p){w("eventDragStart",e,t,n,p),U(t,e),a=e.width(),c.start(function(n,a){if(K(),n){o=!1;var c=_(0,a.col),p=_(0,n.col);i=h(p,c),n.row?s?f&&(e.width(u-10),E(e,v*Math.round((t.end?(t.end-t.start)/Ne:m("defaultEventMinutes"))/g)),e.draggable("option","grid",[u,1]),f=!1):o=!0:(Q(l(d(t.start),i),l(C(t),i)),r()),o=o||f&&!i}else r(),o=!0;e.draggable("option","revert",o)},n,"drag")},stop:function(n,a){if(c.stop(),K(),w("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),J(t,e);else{var s=0;f||(s=Math.round((e.offset().top-G().offset().top)/v)*g+p-(60*t.start.getHours()+t.start.getMinutes())),Z(this,t,i,s,f,n,a)}}})}function g(t,e,n){function r(){K(),s&&(u?(n.hide(),e.draggable("option","grid",null),Q(l(d(t.start),D),l(C(t),D))):(a(b),n.css("display",""),e.draggable("option","grid",[E,O])))}function a(e){var r,a=c(d(t.start),e);t.end&&(r=c(d(t.end),e)),n.text(ae(a,r,m("timeFormat")))}var o,i,s,f,u,v,g,p,D,b,M,T=y.getCoordinateGrid(),S=P(),E=j(),O=I(),k=V();e.draggable({scroll:!1,grid:[E,O],axis:1==S?"y":!1,opacity:m("dragOpacity"),revertDuration:m("dragRevertDuration"),start:function(n,r){w("eventDragStart",e,t,n,r),U(t,e),T.build(),o=e.position(),i=T.cell(n.pageX,n.pageY),s=f=!0,u=v=Y(i),g=p=0,D=0,b=M=0},drag:function(t,n){var a=T.cell(t.pageX,t.pageY);if(s=!!a){if(u=Y(a),g=Math.round((n.position.left-o.left)/E),g!=p){var l=_(0,i.col),c=i.col+g;c=Math.max(0,c),c=Math.min(S-1,c);var d=_(0,c);D=h(d,l)}u||(b=Math.round((n.position.top-o.top)/O)*k)}(s!=f||u!=v||g!=p||b!=M)&&(r(),f=s,v=u,p=g,M=b),e.draggable("option","revert",!s)},stop:function(n,a){K(),w("eventDragStop",e,t,n,a),s&&(u||D||b)?Z(this,t,D,u?0:b,u,n,a):(s=!0,u=!1,g=0,D=0,b=0,r(),e.css("filter",""),e.css(o),J(t,e))}})}function p(t,e,n){var r,a,o=I(),i=V();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,U(t,e),w("eventResizeStart",this,t,n,o)},resize:function(s,l){r=Math.round((Math.max(o,e.height())-l.originalSize.height)/o),r!=a&&(n.text(ae(t.start,r||t.end?c(M(t),i*r):null,m("timeFormat"))),a=r)},stop:function(n,a){w("eventResizeStop",this,t,n,a),r?$(this,t,0,i*r,n,a):J(t,e)}})}var y=this;y.renderEvents=n,y.clearEvents=r,y.slotSegHtml=f,he.call(y);var m=y.opt,w=y.trigger,D=y.isEventDraggable,b=y.isEventResizable,M=y.eventEnd,S=y.eventElementHandlers,k=y.setHeight,x=y.getDaySegmentContainer,F=y.getSlotSegmentContainer,R=y.getHoverListener,N=y.getMaxMinute,z=y.getMinMinute,W=y.timePosition,Y=y.getIsCellAllDay,A=y.colContentLeft,L=y.colContentRight,_=y.cellToDate,P=y.getColCnt,j=y.getColWidth,I=y.getSnapHeight,V=y.getSnapMinutes,G=y.getSlotContainer,X=y.reportEventElement,J=y.showEvents,U=y.hideEvents,Z=y.eventDrop,$=y.eventResize,Q=y.renderDayOverlay,K=y.clearOverlays,te=y.renderDayEvents,ee=y.calendar,ne=ee.formatDate,ae=ee.formatDates;y.draggableDayEvent=v}function re(t){var e,n=ae(t),r=n[0];if(oe(n),r){for(e=0;r.length>e;e++)ie(r[e]);for(e=0;r.length>e;e++)se(r[e],0,0)}return le(n)}function ae(t){var e,n,r,a=[];for(e=0;t.length>e;e++){for(n=t[e],r=0;a.length>r&&fe(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}function oe(t){var e,n,r,a,o;for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)for(a=n[r],a.forwardSegs=[],o=e+1;t.length>o;o++)fe(a,t[o],a.forwardSegs)}function ie(t){var n,r,a=t.forwardSegs,o=0;if(t.forwardPressure===e){for(n=0;a.length>n;n++)r=a[n],ie(r),o=Math.max(o,1+r.forwardPressure);t.forwardPressure=o}}function se(t,n,r){var a,o=t.forwardSegs;if(t.forwardCoord===e)for(o.length?(o.sort(ue),se(o[0],n+1,r),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-r)/(n+1),a=0;o.length>a;a++)se(o[a],0,t.forwardCoord)}function le(t){var e,n,r,a=[];for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)a.push(n[r]);return a}function fe(t,e,n){n=n||[];for(var r=0;e.length>r;r++)ce(t,e[r])&&n.push(e[r]);return n}function ce(t,e){return t.end>e.start&&t.start<e.end}function ue(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||de(t,e)}function de(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function ve(n,r,a){function o(e,n){var r=J[e];return t.isPlainObject(r)?_(r,n||a):r}function i(t,e){return r.trigger.apply(r,[t,e||q].concat(Array.prototype.slice.call(arguments,2),[q]))}function s(t){var e=t.source||{};return V(t.startEditable,e.startEditable,o("eventStartEditable"),t.editable,e.editable,o("editable"))&&!o("disableDragging")}function f(t){var e=t.source||{};return V(t.durationEditable,e.durationEditable,o("eventDurationEditable"),t.editable,e.editable,o("editable"))&&!o("disableResizing")}function u(t){I={};var e,n,r=t.length;for(e=0;r>e;e++)n=t[e],I[n._id]?I[n._id].push(n):I[n._id]=[n]}function v(){I={},G={},X=[]}function g(t){return t.end?d(t.end):P(t)}function p(t,e){X.push({event:t,element:e}),G[t._id]?G[t._id].push(e):G[t._id]=[e]}function y(){t.each(X,function(t,e){q.trigger("eventDestroy",e.event,e.event,e.element)})}function m(t,n){n.click(function(r){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?e:i("eventClick",this,t,r)}).hover(function(e){i("eventMouseover",this,t,e)},function(e){i("eventMouseout",this,t,e)})}function w(t,e){b(t,e,"show")}function D(t,e){b(t,e,"hide")}function b(t,e,n){var r,a=G[t._id],o=a.length;for(r=0;o>r;r++)e&&a[r][0]==e[0]||a[r][n]()}function C(t,e,n,r,a,o,s){var l=e.allDay,f=e._id;T(I[f],n,r,a),i("eventDrop",t,e,n,r,a,function(){T(I[f],-n,-r,l),B(f)},o,s),B(f)}function M(t,e,n,r,a,o){var s=e._id;S(I[s],n,r),i("eventResize",t,e,n,r,function(){S(I[s],-n,-r),B(s)},a,o),B(s)}function T(t,n,r,a){r=r||0;for(var o,i=t.length,s=0;i>s;s++)o=t[s],a!==e&&(o.allDay=a),c(l(o.start,n,!0),r),o.end&&(o.end=c(l(o.end,n,!0),r)),j(o,J)}function S(t,e,n){n=n||0;for(var r,a=t.length,o=0;a>o;o++)r=t[o],r.end=c(l(g(r),e,!0),n),j(r,J)}function E(t){return"object"==typeof t&&(t=t.getDay()),$[t]}function O(){return U}function k(t,e,n){for(e=e||1;$[(t.getDay()+(n?e:0)+7)%7];)l(t,e)}function x(){var t=q.cellToCellOffset.apply(null,arguments),e=q.cellOffsetToDayOffset(t),n=q.dayOffsetToDate(e);return n}function F(t,e){var n=q.getColCnt(),r=te?-1:1,a=te?n-1:0;"object"==typeof t&&(e=t.col,t=t.row);var o=t*n+(e*r+a);return o}function H(t){var e=q.visStart.getDay();return t+=Q[e],7*Math.floor(t/U)+K[(t%U+U)%U]-e}function R(t){var e=d(q.visStart);return l(e,t),e}function N(t){var e=q.dateToDayOffset(t),n=q.dayOffsetToCellOffset(e),r=Y(n);return r}function z(t){return h(t,q.visStart)}function W(t){var e=q.visStart.getDay();return t+=e,Math.floor(t/7)*U+Q[(t%7+7)%7]-Q[e]}function Y(t){var e=q.getColCnt(),n=te?-1:1,r=te?e-1:0,a=Math.floor(t/e),o=(t%e+e)%e*n+r;return{row:a,col:o}}function A(){return 0}function L(t,e){for(var n=q.getRowCnt(),r=q.getColCnt(),a=[],o=q.dateToDayOffset(t),i=q.dateToDayOffset(e),s=q.dayOffsetToCellOffset(o),l=q.dayOffsetToCellOffset(i)-1,f=0;n>f;f++){var c=q.rowToGridOffset(f),u=f*r,d=u+r-1,v=Math.max(s,u),h=Math.min(l,d);if(h>=v){var g=Y(v),p=Y(h),y=[g.col,p.col].sort(),m=q.cellOffsetToDayOffset(v)==o,w=q.cellOffsetToDayOffset(h)+1==i;a.push({gridOffset:c,row:f,leftCol:y[0],rightCol:y[1],isStart:m,isEnd:w})}}return a}var q=this;q.element=n,q.calendar=r,q.name=a,q.opt=o,q.trigger=i,q.isEventDraggable=s,q.isEventResizable=f,q.setEventData=u,q.clearEventData=v,q.eventEnd=g,q.reportEventElement=p,q.triggerEventDestroy=y,q.eventElementHandlers=m,q.showEvents=w,q.hideEvents=D,q.eventDrop=C,q.eventResize=M,q.rowToGridOffset=A;var P=q.defaultEventEnd,j=r.normalizeEvent,B=r.reportEventChange,I={},G={},X=[],J=r.options;q.isHiddenDay=E,q.skipHiddenDays=k,q.getCellsPerWeek=O,q.dateToCell=N,q.dateToDayOffset=z,q.dayOffsetToCellOffset=W,q.cellOffsetToCell=Y,q.cellToDate=x,q.cellToCellOffset=F,q.cellOffsetToDayOffset=H,q.dayOffsetToDate=R,q.rangeToSegments=L;var U,Z=o("hiddenDays")||[],$=[],Q=[],K=[],te=o("isRTL");(function(){o("weekends")===!1&&Z.push(0,6);for(var e=0,n=0;7>e;e++)Q[e]=n,$[e]=-1!=t.inArray(e,Z),$[e]||(K[n]=e,n++);if(U=n,!U)throw"invalid hiddenDays"})()}function he(){function e(t,e){var n=r(t,!1,!0);pe(n,function(t,e){R(t.event,e)}),w(n,e),pe(n,function(t,e){k("eventAfterRender",t.event,t.event,e)})}function n(t,e,n){var a=r([t],!0,!1),o=[];return pe(a,function(t,r){t.row===e&&r.css("top",n),o.push(r[0])}),o}function r(e,n,r){var o,l,f=U(),d=n?t("<div/>"):f,v=a(e);return i(v),o=s(v),d[0].innerHTML=o,l=d.children(),n&&f.append(l),c(v,l),pe(v,function(t,e){t.hsides=O(e,!0)}),pe(v,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),pe(v,function(t,e){t.outerHeight=e.outerHeight(!0)}),u(v,r),v}function a(t){for(var e=[],n=0;t.length>n;n++){var r=o(t[n]);e.push.apply(e,r)}return e}function o(t){for(var e=t.start,n=C(t),r=ee(e,n),a=0;r.length>a;a++)r[a].event=t;return r}function i(t){for(var e=E("isRTL"),n=0;t.length>n;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?X:V,o=(e?r.isStart:r.isEnd)?J:G,i=a(r.leftCol,r.gridOffset),s=o(r.rightCol,r.gridOffset);r.left=i,r.outerWidth=s-i}}function s(t){for(var e="",n=0;t.length>n;n++)e+=f(t[n]);return e}function f(t){var e="",n=E("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];x(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=B(r,E);return e+=a?"<a href='"+q(a)+"'":"<div",e+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+t.left+"px;"+i+"'"+">"+"<div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+q(Z(r.start,r.end,E("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+q(r.title||"")+"</span>"+"</div>",t.isEnd&&F(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),e+="</"+(a?"a":"div")+">"}function c(e,n){for(var r=0;e.length>r;r++){var a=e[r],o=a.event,i=n.eq(r),s=k("eventRender",o,o,i);s===!1?i.remove():(s&&s!==!0&&(s=t(s).css({position:"absolute",left:a.left}),i.replaceWith(s),i=s),a.element=i)}}function u(t,e){var n=v(t),r=m(),a=[];if(e)for(var o=0;r.length>o;o++)r[o].height(n[o]);for(var o=0;r.length>o;o++)a.push(r[o].position().top);pe(t,function(t,e){e.css("top",a[t.row]+t.top)})}function v(t){for(var e=_(),n=j(),r=[],a=g(t),o=0;e>o;o++){for(var i=a[o],s=[],l=0;n>l;l++)s.push(0);for(var f=0;i.length>f;f++){var c=i[f];c.top=A(s.slice(c.leftCol,c.rightCol+1));for(var l=c.leftCol;c.rightCol>=l;l++)s[l]=c.top+c.outerHeight}r.push(A(s))}return r}function g(t){var e,n,r,a=_(),o=[];for(e=0;t.length>e;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;a>r;r++)o[r]=p(o[r]||[]);return o}function p(t){for(var e=[],n=y(t),r=0;n.length>r;r++)e.push.apply(e,n[r]);return e}function y(t){t.sort(ye);for(var e=[],n=0;t.length>n;n++){for(var r=t[n],a=0;e.length>a&&ge(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}function m(){var t,e=_(),n=[];for(t=0;e>t;t++)n[t]=I(t).find("div.fc-day-content > div");return n}function w(t,e){var n=U();pe(t,function(t,n,r){var a=t.event;a._id===e?D(a,n,t):n[0]._fci=r}),T(n,t,D)}function D(t,e,n){x(t)&&S.draggableDayEvent(t,e,n),n.isEnd&&F(t)&&S.resizableDayEvent(t,e,n),N(t,e)}function b(t,e){var n,r=te();e.draggable({delay:50,opacity:E("dragOpacity"),revertDuration:E("dragRevertDuration"),start:function(a,o){k("eventDragStart",e,t,a,o),W(t,e),r.start(function(r,a,o,i){if(e.draggable("option","revert",!r||!o&&!i),Q(),r){var s=ne(a),f=ne(r);n=h(f,s),$(l(d(t.start),n),l(C(t),n))}else n=0},a,"drag")},stop:function(a,o){r.stop(),Q(),k("eventDragStop",e,t,a,o),n?Y(this,t,n,0,t.allDay,a,o):(e.css("filter",""),z(t,e))}})}function M(e,r,a){var o=E("isRTL"),i=o?"w":"e",s=r.find(".ui-resizable-"+i),f=!1;P(r),r.mousedown(function(t){t.preventDefault()}).click(function(t){f&&(t.preventDefault(),t.stopImmediatePropagation())}),s.mousedown(function(o){function s(n){k("eventResizeStop",this,e,n),t("body").css("cursor",""),c.stop(),Q(),u&&L(this,e,u,0,n),setTimeout(function(){f=!1},0)}if(1==o.which){f=!0;var c=te();_(),j();var u,d,v=r.css("top"),h=t.extend({},e),g=S.dayOffsetToCellOffset(re(e.start));K(),t("body").css("cursor",i+"-resize").one("mouseup",s),k("eventResizeStart",this,e,o),c.start(function(r,o){if(r){var s=S.cellToCellOffset(o),f=S.cellToCellOffset(r);if(f=Math.max(f,g),u=S.cellOffsetToDayOffset(f)-S.cellOffsetToDayOffset(s)){h.end=l(H(e),u,!0);var c=d;d=n(h,a.row,v),d=t(d),d.find("*").css("cursor",i+"-resize"),c&&c.remove(),W(e)}else d&&(z(e),d.remove(),d=null);Q(),$(e.start,l(C(e),u))}},o)}})}var S=this;S.renderDayEvents=e,S.draggableDayEvent=b,S.resizableDayEvent=M;var E=S.opt,k=S.trigger,x=S.isEventDraggable,F=S.isEventResizable,H=S.eventEnd,R=S.reportEventElement,N=S.eventElementHandlers,z=S.showEvents,W=S.hideEvents,Y=S.eventDrop,L=S.eventResize,_=S.getRowCnt,j=S.getColCnt;S.getColWidth;var I=S.allDayRow,V=S.colLeft,G=S.colRight,X=S.colContentLeft,J=S.colContentRight;S.dateToCell;var U=S.getDaySegmentContainer,Z=S.calendar.formatDates,$=S.renderDayOverlay,Q=S.clearOverlays,K=S.clearSelection;S.getRowMaxWidth&&S.getRowMaxWidth;var te=S.getHoverListener,ee=S.rangeToSegments,ne=S.cellToDate;S.cellToCellOffset,S.cellOffsetToDayOffset;var re=S.dateToDayOffset;S.dayOffsetToCellOffset}function ge(t,e){for(var n=0;e.length>n;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function pe(t,e){for(var n=0;t.length>n;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function ye(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function me(){function n(t,e,n){r(),e||(e=f(t,n)),c(t,e,n),a(t,e,n)}function r(t){d&&(d=!1,u(),l("unselect",null,t))}function a(t,e,n,r){d=!0,l("select",null,t,e,n,r)}function o(n){var o=i.cellToDate,l=i.getIsCellAllDay,f=i.getHoverListener(),d=i.reportDayClick,v=!1;if(1==n.which&&s("selectable")){r(n);var h;f.start(function(t,n){if(u(),t&&l(t)){h=[o(n),o(t)].sort(Y);var r=s("minDate"),a=s("maxDate");if(r&&r>h[0]||a&&h[1]>=a)return v=!0,e;c(h[0],h[1],!0)}else h=null},n),t(document).one("mouseup",function(t){f.stop(),!v&&h&&(+h[0]==+h[1]&&d(h[0],!0,t),a(h[0],h[1],!0,t))})}}var i=this;i.select=n,i.unselect=r,i.reportSelection=a,i.daySelectionMousedown=o;var s=i.opt,l=i.trigger,f=i.defaultSelectionEnd,c=i.renderSelection,u=i.clearSelection,d=!1;s("selectable")&&s("unselectAuto")&&t(document).mousedown(function(e){var n=s("unselectCancel");n&&t(e.target).parents(n).length||r(e)})}function we(){function e(e,n){var r=o.shift();return r||(r=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),a.push(r.css(e).show()),r}function n(){for(var t;t=a.shift();)o.push(t.hide().unbind())}var r=this;r.renderOverlay=e,r.clearOverlays=n;var a=[],o=[]}function De(t,e){var n,r,a=this;a.build=function(){n=[],r=[],t(n,r)},e&&(a.gridToView=e),a.cell=function(t,e){var o,i=n.length,s=r.length,l=-1,f=-1;for(o=0;i>o;o++)if(e>=n[o][0]&&n[o][1]>e){l=o;break}for(o=0;s>o;o++)if(t>=r[o][0]&&r[o][1]>t){f=o;break}if(l>=0&&f>=0&&a.gridToView){var c=a.gridToView(f,l);f=c[0],l=c[1]}return l>=0&&f>=0?{row:l,col:f,grid:a}:null},a.rect=function(t,e,a,o,i){var s=i.offset();return{top:n[t][0]-s.top,left:r[e][0]-s.left,width:r[o][1]-r[e][0],height:n[a][1]-n[t][0]}}}function be(n){function r(e){Ce(e);var n=null;t.each(f,function(t,r){n||(n=r.cell(e.pageX,e.pageY))}),(!n!=!s||n&&(n.row!=s.row||n.col!=s.col))&&(n?(i||(i=n),o(n,i,n.row-i.row,n.col-i.col)):o(n,i),s=n)}var a,o,i,s,l=this,f=[];n.length===e?f.push(n):f=n,l.start=function(e,n,l){o=e,i=s=null,t.each(f,function(t,e){e.build()}),r(n),a=l||"mousemove",t(document).bind(a,r)},l.stop=function(){return t(document).unbind(a,r),s}}function Ce(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function Me(t){function n(e){return a[e]=a[e]||t(e)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===e?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===e?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}var Te={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",minDate:null,maxDate:null,titleFormat:{year:"yyyy",month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{year:"MMMM",month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesShortest:["S","M","T","W","T","F","S"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",year:"year",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},Se={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ee=t.fullCalendar={version:"1.6.4-yearview"},Oe=Ee.views={};t.fn.fullCalendar=function(n){if("string"==typeof n){var a,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t.data(this,"fullCalendar");if(r&&t.isFunction(r[n])){var i=r[n].apply(r,o);a===e&&(a=i),"destroy"==n&&t.removeData(this,"fullCalendar")}}),a!==e?a:this}n=n||{};var i=n.eventSources||[];return delete n.eventSources,n.events&&(i.push(n.events),delete n.events),n=t.extend(!0,{},Te,n.isRTL||n.isRTL===e&&Te.isRTL?Se:{},n),this.each(function(e,a){var o=t(a),s=new r(o,n,i);o.data("fullCalendar",s),s.render()}),this},Ee.sourceNormalizers=[],Ee.sourceFetchers=[];var ke={dataType:"json",cache:!1},xe=1;Ee.addDays=l,Ee.cloneDate=d,Ee.parseDate=p,Ee.parseISO8601=y,Ee.parseTime=m,Ee.formatDate=w,Ee.formatDates=D;var Fe=["sun","mon","tue","wed","thu","fri","sat"],He=864e5,Re=36e5,Ne=6e4,ze={s:function(t){return t.getSeconds()},ss:function(t){return L(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return L(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return L(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return L(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return L(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},e:function(t,e){return e.dayNamesShortest[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return L(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},zzzz:function(t){return t.getFullYear()+1},t:function(t){return 12>t.getHours()?"a":"p"},tt:function(t){return 12>t.getHours()?"am":"pm"},T:function(t){return 12>t.getHours()?"A":"P"},TT:function(t){return 12>t.getHours()?"AM":"PM"},u:function(t){return w(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return b(t)}};Ee.dateFormatters=ze,Ee.applyAll=I,Oe.month=G,Oe.basicWeek=X,Oe.basicDay=J,n({weekMode:"fixed"}),Oe.year=$,Oe.agendaWeek=K,Oe.agendaDay=te,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})})(jQuery);